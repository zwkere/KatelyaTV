<div align="center">
  <img src="public/logo.png" alt="KatelyaTV Logo" width="128" />

  <h1>KatelyaTV</h1>
  <p><strong>è·¨å¹³å° Â· èšåˆæœç´¢ Â· å³å¼€å³ç”¨ Â· è‡ªæ‰˜ç®¡å½±è§†èšåˆæ’­æ”¾å™¨</strong></p>
  <p>åŸºäº <code>Next.js 14</code> Â· <code>TypeScript</code> Â· <code>Tailwind CSS</code> Â· å¤šæºèšåˆ / æ’­æ”¾è®°å½• / æ”¶è—åŒæ­¥ / è·³è¿‡ç‰‡å¤´ç‰‡å°¾ / PWA</p>
  
  <p>
    <a href="#-å¿«é€Ÿå¼€å§‹">ğŸš€ å¿«é€Ÿå¼€å§‹</a> Â·
    <a href="#-åŠŸèƒ½ç‰¹æ€§">âœ¨ åŠŸèƒ½ç‰¹æ€§</a> Â·
    <a href="#-éƒ¨ç½²æ–¹æ¡ˆ">ğŸ“‹ éƒ¨ç½²æ–¹æ¡ˆ</a> Â·
    <a href="#-é…ç½®è¯´æ˜">âš™ï¸ é…ç½®è¯´æ˜</a>
  </p>
</div>

---

## ğŸ“° é¡¹ç›®å£°æ˜

æœ¬é¡¹ç›®è‡ªã€ŒMoonTVã€æ¼”è¿›è€Œæ¥ï¼Œä¸ºå…¶äºŒåˆ›/ç»§æ‰¿ç‰ˆæœ¬ï¼ŒæŒç»­ç»´æŠ¤ä¸æ”¹è¿›åŠŸèƒ½ä¸ä½“éªŒã€‚ä¿ç•™å¹¶è‡´è°¢åŸä½œè€…ä¸ç¤¾åŒºè´¡çŒ®è€…ã€‚

> **ğŸ”” é‡è¦å˜æ›´**ï¼šåº”ç”¨æˆ·ç¤¾åŒºå»ºè®®ï¼Œä¸ºç¡®ä¿é¡¹ç›®é•¿æœŸç¨³å®šè¿è¡Œå’Œåˆè§„æ€§ï¼Œå†…ç½®è§†é¢‘æºå·²ç§»é™¤ã€‚ç°éœ€è¦ç”¨æˆ·è‡ªè¡Œé…ç½®èµ„æºç«™ä»¥ä½¿ç”¨å®Œæ•´åŠŸèƒ½ã€‚æˆ‘ä»¬æä¾›äº†ç»è¿‡æµ‹è¯•çš„æ¨èé…ç½®æ–‡ä»¶ï¼Œè®©æ‚¨å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¬ æ ¸å¿ƒåŠŸèƒ½

- **ğŸ” èšåˆæœç´¢**ï¼šæ•´åˆå¤šä¸ªå½±è§†èµ„æºç«™ï¼Œä¸€é”®æœç´¢å…¨ç½‘å†…å®¹
- **ğŸ“º é«˜æ¸…æ’­æ”¾**ï¼šåŸºäº ArtPlayer çš„å¼ºå¤§æ’­æ”¾å™¨ï¼Œæ”¯æŒå¤šç§æ ¼å¼
- **â­ï¸ æ™ºèƒ½è·³è¿‡**ï¼šè‡ªåŠ¨æ£€æµ‹å¹¶è·³è¿‡ç‰‡å¤´ç‰‡å°¾ï¼Œæ‰‹åŠ¨è®¾ç½®è·³è¿‡æ—¶é—´æ®µ
- **ğŸ¯ æ–­ç‚¹ç»­æ’­**ï¼šè‡ªåŠ¨è®°å½•æ’­æ”¾è¿›åº¦ï¼Œè·¨è®¾å¤‡åŒæ­¥è§‚çœ‹ä½ç½®
- **ğŸ“± å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…æ‰‹æœºã€å¹³æ¿ã€ç”µè„‘å„ç§å±å¹•

### ğŸ’¾ æ•°æ®ç®¡ç†

- **â­ æ”¶è—åŠŸèƒ½**ï¼šæ”¶è—å–œæ¬¢çš„å½±è§†ä½œå“ï¼Œæ”¯æŒè·¨è®¾å¤‡åŒæ­¥
- **ğŸ“– æ’­æ”¾å†å²**ï¼šè‡ªåŠ¨è®°å½•è§‚çœ‹å†å²ï¼Œå¿«é€Ÿæ‰¾å›çœ‹è¿‡çš„å†…å®¹
- **ğŸ‘¥ å¤šç”¨æˆ·æ”¯æŒ**ï¼šç‹¬ç«‹çš„ç”¨æˆ·ç³»ç»Ÿï¼Œæ¯ä¸ªç”¨æˆ·ç‹¬äº«ä¸ªäººæ•°æ®
- **ğŸ”„ æ•°æ®åŒæ­¥**ï¼šæ”¯æŒå¤šç§å­˜å‚¨åç«¯ï¼ˆLocalStorageã€Redisã€D1ã€Upstashï¼‰
- **ğŸ”’ å†…å®¹è¿‡æ»¤**ï¼šæ™ºèƒ½æˆäººå†…å®¹è¿‡æ»¤ç³»ç»Ÿï¼Œé»˜è®¤å¼€å¯å®‰å…¨ä¿æŠ¤

### ğŸš€ éƒ¨ç½²ç‰¹æ€§

- **ğŸ³ Docker ä¸€é”®éƒ¨ç½²**ï¼šæä¾›å®Œæ•´çš„ Docker é•œåƒï¼Œå¼€ç®±å³ç”¨
- **â˜ï¸ å¤šå¹³å°æ”¯æŒ**ï¼šVercelã€Dockerã€Cloudflare Pages å…¨å…¼å®¹
- **ğŸ”§ çµæ´»é…ç½®**ï¼šæ”¯æŒè‡ªå®šä¹‰èµ„æºç«™ã€ä»£ç†è®¾ç½®ã€ä¸»é¢˜é…ç½®
- **ğŸ“± PWA æ”¯æŒ**ï¼šå¯å®‰è£…ä¸ºæ¡Œé¢/æ‰‹æœºåº”ç”¨
- **ğŸ“º TVBox å…¼å®¹**ï¼šæ”¯æŒ TVBox é…ç½®æ¥å£

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ’¡ æ–¹æ¡ˆé€‰æ‹©æŒ‡å—

| ä½¿ç”¨åœºæ™¯     | æ¨èæ–¹æ¡ˆ         | å­˜å‚¨ç±»å‹     | æˆäººå†…å®¹è¿‡æ»¤ | å¤šç”¨æˆ· | éƒ¨ç½²éš¾åº¦ |
| ------------ | ---------------- | ------------ | ------------ | ------ | -------- |
| **ä¸ªäººä½¿ç”¨** | Docker å•å®¹å™¨    | localstorage | âŒ           | âŒ     | â­       |
| **å®¶åº­ä½¿ç”¨** | Docker + Redis   | redis        | âœ…           | âœ…     | â­â­     |
| **å…è´¹éƒ¨ç½²** | Vercel + Upstash | upstash      | âœ…           | âœ…     | â­â­â­   |
| **ç”Ÿäº§ç¯å¢ƒ** | Docker + Kvrocks | kvrocks      | âœ…           | âœ…     | â­â­     |
| **å…¨çƒåŠ é€Ÿ** | Cloudflare Pages | d1           | âœ…           | âœ…     | â­â­â­â­ |

> ğŸ’¡ **é‡è¦æç¤º**ï¼šæˆäººå†…å®¹è¿‡æ»¤åŠŸèƒ½éœ€è¦æ•°æ®åº“å­˜å‚¨æ”¯æŒï¼Œä¸æ”¯æŒ `localstorage` æ–¹å¼

---

## ğŸ“‹ éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šDocker å•å®¹å™¨ï¼ˆæœ€ç®€å•ï¼‰

**ç‰¹ç‚¹**ï¼š5 åˆ†é’Ÿéƒ¨ç½²ï¼Œä¸ªäººä½¿ç”¨ï¼Œæ— å¤šç”¨æˆ·åŠŸèƒ½

```bash
docker run -d \
  --name katelyatv \
  -p 3000:3000 \
  -e PASSWORD=your_password \
  --restart unless-stopped \
  ghcr.io/katelya77/katelyatv:latest
```

**æŒ‚è½½è‡ªå®šä¹‰é…ç½®**ï¼ˆå¯é€‰ï¼‰ï¼š

```bash
docker run -d \
  --name katelyatv \
  -p 3000:3000 \
  -e PASSWORD=your_password \
  -v $(pwd)/config.json:/app/config.json:ro \
  --restart unless-stopped \
  ghcr.io/katelya77/katelyatv:latest
```

### æ–¹æ¡ˆäºŒï¼šDocker + Redisï¼ˆæ¨èå®¶åº­ä½¿ç”¨ï¼‰

**ç‰¹ç‚¹**ï¼šå®Œæ•´åŠŸèƒ½ï¼Œå¤šç”¨æˆ·æ”¯æŒï¼Œæˆäººå†…å®¹è¿‡æ»¤

```bash
# 1. ä¸‹è½½é…ç½®æ–‡ä»¶
curl -O https://raw.githubusercontent.com/katelya77/KatelyaTV/main/docker-compose.redis.yml
curl -O https://raw.githubusercontent.com/katelya77/KatelyaTV/main/.env.redis.example

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.redis.example .env
```

**ç¼–è¾‘ .env æ–‡ä»¶**ï¼š

```bash
# ç®¡ç†å‘˜è´¦å·ï¼ˆå¿…å¡«ï¼‰
USERNAME=admin
PASSWORD=your_secure_password

# å­˜å‚¨é…ç½®
NEXT_PUBLIC_STORAGE_TYPE=redis
REDIS_URL=redis://katelyatv-redis:6379

# åŠŸèƒ½å¼€å…³
NEXT_PUBLIC_ENABLE_REGISTER=true
```

```bash
# 3. å¯åŠ¨æœåŠ¡
docker compose -f docker-compose.redis.yml up -d
```

### æ–¹æ¡ˆä¸‰ï¼šDocker + Kvrocksï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

**ç‰¹ç‚¹**ï¼šæé«˜å¯é æ€§ï¼Œæ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ï¼ŒèŠ‚çœå†…å­˜

```bash
# 1. ä¸‹è½½é…ç½®æ–‡ä»¶
curl -O https://raw.githubusercontent.com/katelya77/KatelyaTV/main/docker-compose.kvrocks.yml
curl -O https://raw.githubusercontent.com/katelya77/KatelyaTV/main/.env.kvrocks.example

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.kvrocks.example .env
```

**ç¼–è¾‘ .env æ–‡ä»¶**ï¼š

```bash
# ç®¡ç†å‘˜è´¦å·ï¼ˆå¿…å¡«ï¼Œå¦åˆ™æ— æ³•ç™»å½•ï¼‰
USERNAME=admin
PASSWORD=your_secure_password

# å­˜å‚¨é…ç½®
NEXT_PUBLIC_STORAGE_TYPE=kvrocks
KVROCKS_URL=redis://kvrocks:6666

# åŠŸèƒ½å¼€å…³
NEXT_PUBLIC_ENABLE_REGISTER=true
```

```bash
# 3. å¯åŠ¨æœåŠ¡
docker compose -f docker-compose.kvrocks.yml up -d
```

### æ–¹æ¡ˆå››ï¼šVercel + Upstashï¼ˆå…è´¹æ¨èï¼‰

**ç‰¹ç‚¹**ï¼šå®Œå…¨å…è´¹ï¼Œè‡ªåŠ¨ HTTPSï¼Œå…¨çƒ CDN

#### åŸºç¡€éƒ¨ç½²

1. **Fork é¡¹ç›®** â†’ [GitHub ä»“åº“](https://github.com/katelya77/KatelyaTV)
2. **éƒ¨ç½²åˆ° Vercel**ï¼š
   - ç™»å½• [Vercel](https://vercel.com/)
   - å¯¼å…¥åˆš Fork çš„ä»“åº“
   - æ·»åŠ ç¯å¢ƒå˜é‡ï¼š`PASSWORD=your_password`
   - ç‚¹å‡» Deploy

#### å¤šç”¨æˆ·é…ç½®

3. **åˆ›å»º Upstash æ•°æ®åº“**ï¼š

   - è®¿é—® [Upstash](https://upstash.com/)
   - åˆ›å»ºå…è´¹ Redis æ•°æ®åº“
   - è·å– `UPSTASH_URL` å’Œ `UPSTASH_TOKEN`

4. **æ·»åŠ ç¯å¢ƒå˜é‡**ï¼š

```bash
# å­˜å‚¨é…ç½®
NEXT_PUBLIC_STORAGE_TYPE=upstash
UPSTASH_URL=https://xxx.upstash.io
UPSTASH_TOKEN=your_token

# ç®¡ç†å‘˜è´¦å·
USERNAME=admin
PASSWORD=your_password

# åŠŸèƒ½å¼€å…³
NEXT_PUBLIC_ENABLE_REGISTER=true
```

5. **é‡æ–°éƒ¨ç½²** â†’ Vercel Dashboard â†’ Redeploy

### æ–¹æ¡ˆäº”ï¼šCloudflare Pages + D1ï¼ˆå…¨çƒåŠ é€Ÿï¼‰

**ç‰¹ç‚¹**ï¼šå…¨çƒ CDNï¼Œæ— é™å¸¦å®½ï¼Œå…è´¹ SSL

#### å¿«é€Ÿéƒ¨ç½²

1. **Fork é¡¹ç›®** â†’ [GitHub ä»“åº“](https://github.com/katelya77/KatelyaTV)
2. **åˆ›å»º Pages é¡¹ç›®**ï¼š

   - ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
   - Pages â†’ Connect to Git â†’ é€‰æ‹©ä»“åº“
   - æ„å»ºè®¾ç½®ï¼š
     ```
     Build command: pnpm install --frozen-lockfile && pnpm run pages:build
     Build output directory: .vercel/output/static
     ```
   - å…¼å®¹æ€§æ ‡å¿—ï¼š`nodejs_compat`

3. **ç¯å¢ƒå˜é‡é…ç½®**ï¼š

```bash
# ç®¡ç†å‘˜è´¦å·
USERNAME=admin
PASSWORD=your_password

# å­˜å‚¨é…ç½®
NEXT_PUBLIC_STORAGE_TYPE=d1

# åŠŸèƒ½å¼€å…³
NEXT_PUBLIC_ENABLE_REGISTER=true
```

4. **åˆ›å»º D1 æ•°æ®åº“**ï¼ˆå¤šç”¨æˆ·æ”¯æŒï¼‰ï¼š

```bash
# å®‰è£…Wrangler CLI
npm install -g wrangler
wrangler auth login

# åˆ›å»ºæ•°æ®åº“
wrangler d1 create katelyatv-db
# âš ï¸ é‡è¦ï¼šç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œæ­¤å‘½ä»¤
# å¦‚æœé‡åˆ°æ–‡ä»¶è·¯å¾„é”™è¯¯ï¼Œè¯·å‚è€ƒ D1_MIGRATION.md æ’æŸ¥æŒ‡å—
wrangler d1 execute katelyatv-db --file=./scripts/d1-init.sql
```

5. **é…ç½®æ•°æ®åº“ç»‘å®š** â†’ åœ¨ `wrangler.toml` ä¸­æ·»åŠ æ•°æ®åº“ ID

---

## ï¿½ æ•…éšœæ’é™¤

### å¸¸è§éƒ¨ç½²é—®é¢˜

#### Docker + Kvrocks ç™»å½•å¤±è´¥ âš ï¸

**ç—‡çŠ¶**ï¼šéƒ¨ç½²æˆåŠŸä½†æ— æ³•ç™»å½•ï¼Œæç¤º"è´¦å·æˆ–å¯†ç é”™è¯¯"

**è§£å†³æ–¹æ¡ˆ**ï¼š

```bash
# ç¡®ä¿ .env åŒ…å«å®Œæ•´é…ç½®
USERNAME=admin
PASSWORD=your_secure_password
NEXT_PUBLIC_STORAGE_TYPE=kvrocks
NEXT_PUBLIC_ENABLE_REGISTER=true

# é‡å¯æœåŠ¡åº”ç”¨é…ç½®
docker compose -f docker-compose.kvrocks.yml down
docker compose -f docker-compose.kvrocks.yml up -d
```

#### æ„å»ºå¤±è´¥

```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬ (éœ€è¦18+)
node --version

# æ¸…ç†é‡è£…
rm -rf node_modules pnpm-lock.yaml
pnpm install
```

#### æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# Redisè¿æ¥æµ‹è¯•
redis-cli -u $REDIS_URL ping

# D1æ•°æ®åº“æ£€æŸ¥
wrangler d1 info your-database-name

# Upstashè¿æ¥æµ‹è¯•
curl -H "Authorization: Bearer $UPSTASH_TOKEN" \
     $UPSTASH_URL/ping
```

### ç¯å¢ƒå˜é‡è¯´æ˜

| å˜é‡å                        | å¿…å¡«   | è¯´æ˜         | ç¤ºä¾‹å€¼                   |
| ----------------------------- | ------ | ------------ | ------------------------ |
| `USERNAME`                    | æ˜¯\*   | ç®¡ç†å‘˜ç”¨æˆ·å | `admin`                  |
| `PASSWORD`                    | æ˜¯     | è®¿é—®å¯†ç      | `your_password`          |
| `NEXT_PUBLIC_STORAGE_TYPE`    | å¦     | å­˜å‚¨ç±»å‹     | `redis/d1/upstash`       |
| `NEXT_PUBLIC_ENABLE_REGISTER` | å¦     | ç”¨æˆ·æ³¨å†Œ     | `true/false`             |
| `REDIS_URL`                   | å¦\*\* | Redis è¿æ¥   | `redis://localhost:6379` |
| `UPSTASH_URL`                 | å¦\*\* | Upstash åœ°å€ | `https://xxx.upstash.io` |
| `UPSTASH_TOKEN`               | å¦\*\* | Upstash ä»¤ç‰Œ | `AX_xxx`                 |

> \*å¤šç”¨æˆ·éƒ¨ç½²å¿…å¡« \*\*å¯¹åº”å­˜å‚¨ç±»å‹å¿…å¡«

### è§†é¢‘æºé…ç½®

#### æ¨èé…ç½®æ–‡ä»¶

- **åŸºç¡€ç‰ˆ**ï¼ˆ20+ç«™ç‚¹ï¼‰ï¼š[config_isadult.json](https://www.mediafire.com/file/upztrjc0g1ynbzy/config_isadult.json/file)
- **å¢å¼ºç‰ˆ**ï¼ˆ94 ç«™ç‚¹ï¼‰ï¼š[configplus_isadult.json](https://www.mediafire.com/file/ff60ynj6z21iqfb/configplus_isadult.json/file)

#### é…ç½®æ–¹å¼

1. **Docker**ï¼šæŒ‚è½½åˆ° `/app/config.json`
2. **Vercel/Cloudflare**ï¼šæäº¤åˆ°ä»“åº“æ ¹ç›®å½•
3. **ç®¡ç†å‘˜ç•Œé¢**ï¼šè®¿é—® `/admin` ä¸Šä¼ é…ç½®

#### é…ç½®æ ¼å¼

```json
{
  "cache_time": 7200,
  "api_site": {
    "site1": {
      "api": "https://api.example.com/provide/vod",
      "name": "èµ„æºç«™åç§°",
      "is_adult": false
    }
  }
}
```

---

## ğŸ“± é«˜çº§åŠŸèƒ½ä½¿ç”¨æŒ‡å—

### ğŸ”’ æˆäººå†…å®¹è¿‡æ»¤

**åŠŸèƒ½ä»‹ç»**ï¼š

- æ™ºèƒ½è¯†åˆ«å’Œè¿‡æ»¤æˆäººå†…å®¹èµ„æºç«™
- ç”¨æˆ·å¯è‡ªä¸»é€‰æ‹©å¼€å¯æˆ–å…³é—­è¿‡æ»¤åŠŸèƒ½
- é»˜è®¤å¼€å¯è¿‡æ»¤ï¼Œç¡®ä¿å®‰å…¨æµè§ˆä½“éªŒ
- æ”¯æŒèµ„æºåˆ†ç»„æ˜¾ç¤ºï¼Œé¿å…è¯¯è§¦

**âš ï¸ é‡è¦éƒ¨ç½²è¦æ±‚**ï¼š

æˆäººå†…å®¹è¿‡æ»¤åŠŸèƒ½éœ€è¦æœåŠ¡å™¨ç«¯å­˜å‚¨æ”¯æŒï¼Œ**ä¸èƒ½ä½¿ç”¨ `localstorage` å­˜å‚¨ç±»å‹**ã€‚

| éƒ¨ç½²å¹³å°         | æ¨èå­˜å‚¨ç±»å‹        | é…ç½®è¦æ±‚                  |
| ---------------- | ------------------- | ------------------------- |
| Docker           | `redis` / `kvrocks` | é…ç½® Redis/Kvrocks æœåŠ¡å™¨ |
| Vercel           | `upstash`           | é…ç½® Upstash Redis        |
| Cloudflare Pages | `d1`                | é…ç½® D1 æ•°æ®åº“            |

**Cloudflare Pages ç‰¹æ®Šé…ç½®**ï¼š

å¦‚æœä½ ä½¿ç”¨ Cloudflare Pages éƒ¨ç½²ï¼Œ**å¿…é¡»é…ç½® D1 æ•°æ®åº“**æ‰èƒ½ä½¿ç”¨æˆäººå†…å®¹è¿‡æ»¤åŠŸèƒ½ï¼š

1. **åˆ›å»º D1 æ•°æ®åº“**ï¼š

   ```bash
   wrangler d1 create katelyatv-db
   ```

2. **åˆå§‹åŒ–æ•°æ®åº“è¡¨**ï¼š

   ```bash
   wrangler d1 execute katelyatv-db --file=./scripts/d1-init.sql
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**ï¼š

   ```bash
   NEXT_PUBLIC_STORAGE_TYPE=d1
   ```

4. **æ›´æ–° wrangler.toml**ï¼š
   ```toml
   [[d1_databases]]
   binding = "DB"
   database_name = "katelyatv-db"
   database_id = "your-d1-database-id"
   ```

**æ•…éšœæ’é™¤**ï¼š

- âŒ **é”™è¯¯**ï¼š"è·å–ç”¨æˆ·è®¾ç½®å¤±è´¥"

  - **åŸå› **ï¼šä½¿ç”¨äº† `localstorage` å­˜å‚¨ç±»å‹ï¼ŒæœåŠ¡å™¨ç«¯ API æ— æ³•è®¿é—®
  - **è§£å†³**ï¼šæŒ‰ä¸Šè¿°è¦æ±‚é…ç½®æ•°æ®åº“å­˜å‚¨

- âŒ **é”™è¯¯**ï¼šè¿‡æ»¤å¼€å…³æ— æ³•ä¿å­˜
  - **åŸå› **ï¼šå­˜å‚¨åç«¯æœªæ­£ç¡®é…ç½®æˆ–è¿æ¥å¤±è´¥
  - **è§£å†³**ï¼šæ£€æŸ¥æ•°æ®åº“è¿æ¥å’Œç¯å¢ƒå˜é‡é…ç½®

**ä½¿ç”¨æ–¹æ³•**ï¼š

1. **è®¿é—®ç”¨æˆ·è®¾ç½®**ï¼š

   - ç™»å½•åè®¿é—® `/settings` é¡µé¢
   - æˆ–åœ¨ç”¨æˆ·èœå•ä¸­ç‚¹å‡»ã€Œå†…å®¹è¿‡æ»¤ã€

2. **é…ç½®è¿‡æ»¤é€‰é¡¹**ï¼š

   - åœ¨ã€Œå†…å®¹è¿‡æ»¤ã€éƒ¨åˆ†æ‰¾åˆ°ã€Œæˆäººå†…å®¹è¿‡æ»¤ã€å¼€å…³
   - **å¼€å¯**ï¼šå®Œå…¨éšè—æˆäººå†…å®¹èµ„æºç«™å’Œæœç´¢ç»“æœ
   - **å…³é—­**ï¼šæˆäººå†…å®¹åœ¨æœç´¢ç»“æœä¸­å•ç‹¬åˆ†ç»„æ˜¾ç¤º

3. **æœç´¢ç»“æœå±•ç¤º**ï¼š
   - **è¿‡æ»¤å¼€å¯æ—¶**ï¼šåªæ˜¾ç¤ºå¸¸è§„å†…å®¹
   - **è¿‡æ»¤å…³é—­æ—¶**ï¼šæ˜¾ç¤ºä¸¤ä¸ªæ ‡ç­¾é¡µã€Œå¸¸è§„ç»“æœã€å’Œã€Œæˆäººå†…å®¹ã€

**é…ç½®æ–‡ä»¶æ ¼å¼**ï¼š

```json
// config.json ä¸­çš„èµ„æºç«™é…ç½®
{
  "api_site": {
    "regular_site": {
      "api": "https://example.com/api.php/provide/vod",
      "name": "å¸¸è§„å½±è§†ç«™",
      "is_adult": false // æˆ–çœç•¥æ­¤å­—æ®µï¼Œé»˜è®¤ä¸º false
    },
    "adult_site": {
      "api": "https://adult.example.com/api.php/provide/vod",
      "name": "æˆäººå†…å®¹ç«™",
      "is_adult": true // æ ‡è®°ä¸ºæˆäººå†…å®¹
    }
  }
}
```

**å®‰å…¨æç¤º**ï¼š

- é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ–°ç”¨æˆ·å’Œæœªç™»å½•ç”¨æˆ·çš„æˆäººå†…å®¹è¿‡æ»¤å‡ä¸ºå¼€å¯çŠ¶æ€
- å…³é—­è¿‡æ»¤åŠŸèƒ½éœ€è¦ç”¨æˆ·ä¸»åŠ¨æ“ä½œï¼Œç¡®ä¿ä½¿ç”¨æ„å›¾æ˜ç¡®
- å»ºè®®ç®¡ç†å‘˜åœ¨é…ç½®èµ„æºç«™æ—¶å‡†ç¡®æ ‡è®° `is_adult` å­—æ®µ

**è¯¦ç»†é…ç½®æŒ‡å—**ï¼š

- ğŸ“– [Cloudflare Pages æˆäººå†…å®¹è¿‡æ»¤é…ç½®æŒ‡å—](./CLOUDFLARE_PAGES_ADULT_FILTER.md)
- ğŸ—„ï¸ [D1 æ•°æ®åº“è¿ç§»è¯´æ˜](./D1_MIGRATION.md)

### ğŸ¯ è·³è¿‡ç‰‡å¤´ç‰‡å°¾

**åŠŸèƒ½ä»‹ç»**ï¼š

- è‡ªåŠ¨è¯†åˆ«å¹¶è·³è¿‡ç‰‡å¤´ç‰‡å°¾
- æ”¯æŒæ‰‹åŠ¨è®¾ç½®è·³è¿‡æ—¶é—´ç‚¹
- å¤šè®¾å¤‡åŒæ­¥è·³è¿‡è®°å½•ï¼ˆéœ€é…ç½®æ•°æ®åº“ï¼‰

**ä½¿ç”¨æ–¹æ³•**ï¼š

1. æ’­æ”¾è§†é¢‘æ—¶ç‚¹å‡»ã€Œè®¾ç½®ã€æŒ‰é’®
2. é€‰æ‹©ã€Œè·³è¿‡ç‰‡æ®µè®¾ç½®ã€
3. è®¾ç½®ç‰‡å¤´ç»“æŸæ—¶é—´å’Œç‰‡å°¾å¼€å§‹æ—¶é—´
4. ä¸‹æ¬¡æ’­æ”¾è‡ªåŠ¨è·³è¿‡

**æ‰¹é‡è®¾ç½®**ï¼š

```json
// åœ¨ç®¡ç†å‘˜ç•Œé¢æ‰¹é‡å¯¼å…¥è·³è¿‡é…ç½®
{
  "skip_settings": {
    "ç”µè§†å‰§åç§°": {
      "intro_end": 90, // ç‰‡å¤´ç»“æŸæ—¶é—´ï¼ˆç§’ï¼‰
      "outro_start": 2700 // ç‰‡å°¾å¼€å§‹æ—¶é—´ï¼ˆç§’ï¼‰
    }
  }
}
```

### ğŸ“º TVBox å…¼å®¹æ¨¡å¼

**é…ç½®åœ°å€ç”Ÿæˆ**ï¼š

- JSON æ ¼å¼ï¼š`https://ä½ çš„åŸŸå/api/tvbox?format=json`
- TXT æ ¼å¼ï¼š`https://ä½ çš„åŸŸå/api/tvbox?format=txt`
- XML æ ¼å¼ï¼š`https://ä½ çš„åŸŸå/api/tvbox?format=xml`

**æ”¯æŒçš„ TVBox åº”ç”¨**ï¼š

- TVBoxï¼ˆå¼€æºç‰ˆï¼‰
- CatVodTVOfficial
- EasyBox
- FongMi TV
- å…¶ä»–å…¼å®¹åº”ç”¨

**é…ç½®å¯¼å…¥æ­¥éª¤**ï¼š

1. æ‰“å¼€ TVBox åº”ç”¨
2. è¿›å…¥ã€Œé…ç½®ã€æˆ–ã€Œè®¾ç½®ã€é¡µé¢
3. é€‰æ‹©ã€Œå¯¼å…¥é…ç½®ã€æˆ–ã€Œæ·»åŠ é…ç½®ã€
4. è¾“å…¥ä¸Šè¿°é…ç½®åœ°å€
5. ç­‰å¾…å¯¼å…¥å®Œæˆ

### ğŸ”„ å¤šè®¾å¤‡æ•°æ®åŒæ­¥

**æ”¯æŒçš„æ•°æ®**ï¼š

- è§‚çœ‹å†å²è®°å½•
- æ”¶è—å¤¹å†…å®¹
- è·³è¿‡ç‰‡æ®µè®¾ç½®
- ç”¨æˆ·åå¥½é…ç½®

**åŒæ­¥æ–¹å¼å¯¹æ¯”**ï¼š

| å­˜å‚¨æ–¹å¼     | åŒæ­¥èŒƒå›´ | é…ç½®éš¾åº¦   | å…è´¹ç¨‹åº¦   |
| ------------ | -------- | ---------- | ---------- |
| LocalStorage | å•è®¾å¤‡   | æ— éœ€é…ç½®   | å®Œå…¨å…è´¹   |
| Redis        | å…¨åŒæ­¥   | éœ€è¦æœåŠ¡å™¨ | è‡ªå»ºå…è´¹   |
| Upstash      | å…¨åŒæ­¥   | ç®€å•é…ç½®   | æœ‰å…è´¹é¢åº¦ |
| D1           | å…¨åŒæ­¥   | ä¸­ç­‰éš¾åº¦   | å®Œå…¨å…è´¹   |
| Kvrocks      | å…¨åŒæ­¥   | éœ€è¦éƒ¨ç½²   | è‡ªå»ºå…è´¹   |

### ğŸ¨ ç•Œé¢è‡ªå®šä¹‰

**ä¸»é¢˜åˆ‡æ¢**ï¼š

- æ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢
- è·Ÿéšç³»ç»Ÿä¸»é¢˜è®¾ç½®
- æ‰‹åŠ¨åˆ‡æ¢å¹¶è®°å¿†åå¥½

**ç•Œé¢å¸ƒå±€**ï¼š

- å“åº”å¼è®¾è®¡ï¼Œé€‚é…æ‰‹æœº/å¹³æ¿/æ¡Œé¢
- å¯è°ƒèŠ‚è§†é¢‘æ’­æ”¾å™¨å¤§å°
- éšè—/æ˜¾ç¤ºä¾§è¾¹æ 
- è‡ªå®šä¹‰é¦–é¡µå±•ç¤ºå†…å®¹

**ä¸ªæ€§åŒ–è®¾ç½®**ï¼š

```json
// åœ¨ç”¨æˆ·è®¾ç½®ä¸­è‡ªå®šä¹‰
{
  "ui_preferences": {
    "theme": "dark", // ä¸»é¢˜ï¼šdark/light/auto
    "layout": "grid", // å¸ƒå±€ï¼šgrid/list
    "items_per_page": 24, // æ¯é¡µæ˜¾ç¤ºæ•°é‡
    "auto_play": true, // è‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€é›†
    "video_quality": "auto", // é»˜è®¤æ¸…æ™°åº¦
    "subtitle_language": "zh-cn" // å­—å¹•è¯­è¨€åå¥½
  }
}
```

### ğŸ“Š æ•°æ®ç»Ÿè®¡åˆ†æ

**ç®¡ç†å‘˜é¢æ¿åŠŸèƒ½**ï¼š

- è®¿é—®é‡ç»Ÿè®¡å›¾è¡¨
- çƒ­é—¨å†…å®¹æ’è¡Œæ¦œ
- ç”¨æˆ·æ´»è·ƒåº¦åˆ†æ
- ç³»ç»Ÿæ€§èƒ½ç›‘æ§

**è®¿é—®æ•°æ®**ï¼š

```bash
# é€šè¿‡ç®¡ç†å‘˜ç•Œé¢æŸ¥çœ‹æˆ–APIè·å–
GET /api/admin/analytics
{
  "daily_visits": 1250,
  "total_users": 89,
  "popular_content": [
    {"title": "çƒ­é—¨ç”µå½±", "views": 456},
    {"title": "çƒ­æ’­å‰§é›†", "views": 321}
  ]
}
```

- ä¸‹è½½ï¼š[configplus_isadult.json](https://www.mediafire.com/file/ff60ynj6z21iqfb/configplus_isadult.json/file)
- é‡å‘½åä¸º config.json ä½¿ç”¨

1. ä¸‹è½½é…ç½®æ–‡ä»¶ï¼š

   - [åŸºç¡€ç‰ˆ config_isadult.json](https://www.mediafire.com/file/upztrjc0g1ynbzy/config_isadult.json/file)
   - [Plus ç‰ˆï¼ˆ94 ä¸ªç‰‡æºï¼‰](https://www.mediafire.com/file/ff60ynj6z21iqfb/configplus_isadult.json/file)

2. é…ç½®æ–¹å¼ï¼š
   - **Docker**ï¼šæŒ‚è½½é…ç½®æ–‡ä»¶ `-v ./config.json:/app/config.json:ro`
   - **Vercel**ï¼šæ›¿æ¢ä»“åº“ä¸­çš„ `config.json` æ–‡ä»¶å†…å®¹
   - **ç®¡ç†å‘˜ç•Œé¢**ï¼šç™»å½•åå° `/admin` å¯¼å…¥é…ç½®

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨é…ç½®

ç¼–è¾‘ `config.json` æ–‡ä»¶ï¼š

```json
{
  "cache_time": 7200,
  "api_site": {
    "example": {
      "api": "https://example.com/api.php/provide/vod",
      "name": "ç¤ºä¾‹èµ„æºç«™",
      "detail": "https://example.com"
    }
  }
}
```

---

## ğŸ“± é«˜çº§åŠŸèƒ½

### TVBox å…¼å®¹

æ”¯æŒ TVBox é…ç½®æ¥å£ï¼Œå¯ä»¥å°†è§†é¢‘æºå¯¼å…¥åˆ°å„ç§ç”µè§†ç›’å­åº”ç”¨ï¼š

- **é…ç½®åœ°å€**ï¼š`https://your-domain.com/api/tvbox?format=json`
- **è¯¦ç»†è¯´æ˜**ï¼šæŸ¥çœ‹ [TVBox é…ç½®æŒ‡å—](docs/TVBOX.md)

### è·³è¿‡ç‰‡å¤´ç‰‡å°¾

æ™ºèƒ½è·³è¿‡ç‰‡å¤´ç‰‡å°¾åŠŸèƒ½ï¼š

- ğŸ¯ è‡ªåŠ¨æ£€æµ‹å·²è®¾ç½®çš„è·³è¿‡ç‰‡æ®µ
- âš™ï¸ æ‰‹åŠ¨è®¾ç½®è·³è¿‡æ—¶é—´æ®µï¼ˆç²¾ç¡®åˆ°ç§’ï¼‰
- ğŸ”„ æ”¯æŒå¤šè®¾å¤‡åŒæ­¥ï¼ˆéœ€é…ç½® Redis/D1/Upstashï¼‰

### AndroidTV æ”¯æŒ

é…åˆ [OrionTV](https://github.com/zimplexing/OrionTV) åœ¨ Android TV ä¸Šä½¿ç”¨ï¼š

1. åœ¨ OrionTV ä¸­å¡«å…¥ KatelyaTV éƒ¨ç½²åœ°å€
2. è¾“å…¥è®¾ç½®çš„ PASSWORD
3. å³å¯åœ¨ç”µè§†ä¸Šè§‚çœ‹

---

## ğŸ› ï¸ ç®¡ç†ä¸ç»´æŠ¤

### å‡çº§æ›´æ–°

### ğŸ”„ å‡çº§æ›´æ–°

**è‡ªåŠ¨æ›´æ–°æ£€æµ‹**ï¼š

- ç½‘ç«™ä¼šè‡ªåŠ¨æ£€æµ‹æ–°ç‰ˆæœ¬
- åœ¨ç®¡ç†å‘˜ç•Œé¢æŸ¥çœ‹æ›´æ–°çŠ¶æ€
- æ”¯æŒä¸€é”®æ›´æ–°æé†’

**æ‰‹åŠ¨æ›´æ–°æ­¥éª¤**ï¼š

**Docker æ›´æ–°**ï¼š

```bash
# åœæ­¢å¹¶æ›´æ–°æœåŠ¡
docker compose pull
docker compose up -d

# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
docker compose ps

# æŸ¥çœ‹æ›´æ–°æ—¥å¿—
docker compose logs -f katelyatv
```

**Git éƒ¨ç½²æ›´æ–°**ï¼š

```bash
# å¤‡ä»½å½“å‰é…ç½®
cp config.json config.json.backup

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# å®‰è£…æ–°ä¾èµ–
pnpm install

# é‡æ–°æ„å»º
pnpm run build

# æ¢å¤é…ç½®æ–‡ä»¶
cp config.json.backup config.json

# é‡å¯æœåŠ¡
pm2 restart katelyatv
```

**Vercel/Cloudflare æ›´æ–°**ï¼š

- Fork çš„ä»“åº“ä¼šè‡ªåŠ¨æ¥æ”¶ä¸Šæ¸¸æ›´æ–°æé†’
- åœ¨ GitHub ä¸­ç‚¹å‡» `Sync fork` åŒæ­¥æ›´æ–°
- å¹³å°ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²

### ğŸ’¾ æ•°æ®å¤‡ä»½ä¸æ¢å¤

**å¤‡ä»½è„šæœ¬ç¤ºä¾‹**ï¼š

```bash
#!/bin/bash
# backup.sh - å®Œæ•´å¤‡ä»½è„šæœ¬
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="backups/$DATE"
mkdir -p $BACKUP_DIR

echo "å¼€å§‹å¤‡ä»½ KatelyaTV æ•°æ®..."

# å¤‡ä»½é…ç½®æ–‡ä»¶
cp config.json $BACKUP_DIR/config.json
echo "âœ“ é…ç½®æ–‡ä»¶å¤‡ä»½å®Œæˆ"

# æ ¹æ®å­˜å‚¨ç±»å‹å¤‡ä»½æ•°æ®
if [ -f .env ] && grep -q "REDIS_URL" .env; then
    # Redis æ•°æ®å¤‡ä»½
    docker compose exec redis redis-cli --rdb $BACKUP_DIR/dump.rdb
    echo "âœ“ Redis æ•°æ®å¤‡ä»½å®Œæˆ"
elif [ -f .env ] && grep -q "UPSTASH" .env; then
    # Upstash æ•°æ®å¯¼å‡º
    echo "Upstash æ•°æ®éœ€æ‰‹åŠ¨åœ¨æ§åˆ¶å°å¯¼å‡º"
fi

# Kvrocks æ•°æ®å¤‡ä»½
if docker compose ps | grep -q kvrocks; then
    docker run --rm \
        -v katelyatv_kvrocks-data:/data:ro \
        -v $(pwd)/$BACKUP_DIR:/backup \
        alpine tar czf /backup/kvrocks-data.tar.gz /data
    echo "âœ“ Kvrocks æ•°æ®å¤‡ä»½å®Œæˆ"
fi

# å‹ç¼©å¤‡ä»½æ–‡ä»¶
tar -czf "katelyatv-backup-$DATE.tar.gz" -C backups $DATE
rm -rf $BACKUP_DIR

echo "âœ“ å¤‡ä»½å®Œæˆ: katelyatv-backup-$DATE.tar.gz"
```

**æ¢å¤æ•°æ®**ï¼š

```bash
#!/bin/bash
# restore.sh - æ•°æ®æ¢å¤è„šæœ¬
BACKUP_FILE="$1"

if [ -z "$BACKUP_FILE" ]; then
    echo "ç”¨æ³•: $0 <backup-file.tar.gz>"
    exit 1
fi

echo "æ¢å¤æ•°æ®ä»: $BACKUP_FILE"
tar -xzf $BACKUP_FILE

# æ¢å¤é…ç½®æ–‡ä»¶
BACKUP_DIR=$(tar -tzf $BACKUP_FILE | head -1 | cut -f1 -d"/")
cp $BACKUP_DIR/config.json ./config.json

# æ¢å¤æ•°æ®åº“
if [ -f "$BACKUP_DIR/dump.rdb" ]; then
    docker compose exec redis redis-cli FLUSHALL
    docker cp $BACKUP_DIR/dump.rdb redis:/data/dump.rdb
    docker compose restart redis
fi

echo "âœ“ æ•°æ®æ¢å¤å®Œæˆ"
```

### ğŸ” æ•…éšœè¯Šæ–­æŒ‡å—

**å¸¸è§é—®é¢˜å¿«é€Ÿæ’æŸ¥**ï¼š

| é—®é¢˜ç—‡çŠ¶       | å¯èƒ½åŸå›                 | è§£å†³æ–¹æ¡ˆ                        |
| -------------- | ----------------------- | ------------------------------- |
| æ— æ³•è®¿é—®ç½‘ç«™   | ç«¯å£æœªå¼€æ”¾/æœåŠ¡æœªå¯åŠ¨   | æ£€æŸ¥é˜²ç«å¢™å’ŒæœåŠ¡çŠ¶æ€            |
| è§†é¢‘æ— æ³•æ’­æ”¾   | é…ç½®æ–‡ä»¶é”™è¯¯/æºå¤±æ•ˆ     | éªŒè¯ config.json æ ¼å¼å’Œæºå¯ç”¨æ€§ |
| ç™»å½•å¤±è´¥       | å¯†ç é”™è¯¯/ç¯å¢ƒå˜é‡æœªè®¾ç½® | æ£€æŸ¥ PASSWORD ç¯å¢ƒå˜é‡          |
| æ•°æ®åº“è¿æ¥å¤±è´¥ | è¿æ¥ä¿¡æ¯é”™è¯¯/æœåŠ¡æœªå¯åŠ¨ | éªŒè¯è¿æ¥å­—ç¬¦ä¸²å’ŒæœåŠ¡çŠ¶æ€        |
| é¡µé¢åŠ è½½ç¼“æ…¢   | å†…å­˜ä¸è¶³/ç¼“å­˜å¤±æ•ˆ       | é‡å¯æœåŠ¡æˆ–æ¸…ç†ç¼“å­˜              |

**è¯Šæ–­å‘½ä»¤**ï¼š

```bash
# ç³»ç»ŸçŠ¶æ€æ£€æŸ¥
docker compose ps
docker compose logs --tail=50

# ç½‘ç»œè¿é€šæ€§æµ‹è¯•
curl -I http://localhost:3000
wget --spider http://localhost:3000

# æ•°æ®åº“è¿æ¥æµ‹è¯•
# Redis
redis-cli -u $REDIS_URL ping
# æˆ–è€…
docker compose exec redis redis-cli ping

# é…ç½®æ–‡ä»¶éªŒè¯
cat config.json | jq '.'
# å¦‚æœæ²¡æœ‰ jqï¼Œå¯ä»¥ç”¨ python
python -m json.tool config.json

# ç«¯å£å ç”¨æ£€æŸ¥
netstat -tlnp | grep 3000
ss -tlnp | grep 3000
```

### ğŸ“Š æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–

**ç›‘æ§æŒ‡æ ‡**ï¼š

```bash
# å®æ—¶ç³»ç»Ÿç›‘æ§è„šæœ¬
#!/bin/bash
# monitor.sh
while true; do
    echo "=== $(date) ==="

    # Docker å®¹å™¨çŠ¶æ€
    echo "å®¹å™¨èµ„æºä½¿ç”¨:"
    docker stats --no-stream --format "table {{.Name}}\t{{.CPUPerc}}\t{{.MemUsage}}"

    # ç³»ç»Ÿè´Ÿè½½
    echo -e "\nç³»ç»Ÿè´Ÿè½½:"
    uptime

    # ç£ç›˜ä½¿ç”¨
    echo -e "\nç£ç›˜ä½¿ç”¨:"
    df -h / | tail -1

    # å†…å­˜ä½¿ç”¨
    echo -e "\nå†…å­˜ä½¿ç”¨:"
    free -h | head -2

    echo "================================"
    sleep 30
done
```

**æ€§èƒ½ä¼˜åŒ–å»ºè®®**ï¼š

1. **å†…å­˜ä¼˜åŒ–**ï¼š

   ```bash
   # Node.js å†…å­˜é™åˆ¶
   export NODE_OPTIONS="--max-old-space-size=1024"

   # Docker å†…å­˜é™åˆ¶
   docker run --memory=1g --memory-swap=1.5g ...
   ```

2. **ç¼“å­˜ä¼˜åŒ–**ï¼š

   ```json
   // config.json ä¸­å¢åŠ ç¼“å­˜æ—¶é—´
   {
     "cache_time": 21600, // 6å°æ—¶ç¼“å­˜
     "api_cache_time": 3600 // APIç¼“å­˜1å°æ—¶
   }
   ```

3. **ç½‘ç»œä¼˜åŒ–**ï¼š
   - ä½¿ç”¨ CDN åŠ é€Ÿé™æ€èµ„æº
   - å¯ç”¨ Gzip/Brotli å‹ç¼©
   - é…ç½®é€‚å½“çš„ç¼“å­˜å¤´

### ğŸš¨ å®‰å…¨åŠ å›º

**ç”Ÿäº§ç¯å¢ƒå®‰å…¨æ£€æŸ¥æ¸…å•**ï¼š

- [ ] è®¾ç½®å¼ºå¯†ç ç­–ç•¥ï¼ˆè‡³å°‘ 12 ä½åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼‰
- [ ] å¯ç”¨ HTTPSï¼ˆä½¿ç”¨ Let's Encrypt æˆ– Cloudflareï¼‰
- [ ] é…ç½®é˜²ç«å¢™è§„åˆ™ï¼ˆä»…å¼€æ”¾å¿…è¦ç«¯å£ï¼‰
- [ ] å®šæœŸæ›´æ–°ç³»ç»Ÿå’Œä¾èµ–åŒ…
- [ ] è®¾ç½®è®¿é—®æ—¥å¿—ç›‘æ§
- [ ] é…ç½®è‡ªåŠ¨å¤‡ä»½ç­–ç•¥
- [ ] é™åˆ¶ç®¡ç†å‘˜ç•Œé¢è®¿é—®ï¼ˆIP ç™½åå•ï¼‰
- [ ] å¯ç”¨ fail2ban é˜²æ­¢æš´åŠ›ç ´è§£

**å®‰å…¨é…ç½®ç¤ºä¾‹**ï¼š

```bash
# nginx é…ç½®å¢å¼ºå®‰å…¨æ€§
# /etc/nginx/sites-available/katelyatv
server {
    listen 443 ssl http2;
    server_name your-domain.com;

    # SSL é…ç½®
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    ssl_protocols TLSv1.2 TLSv1.3;

    # å®‰å…¨å¤´
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection "1; mode=block";
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains";

    # é™åˆ¶è¯·æ±‚å¤§å°
    client_max_body_size 10M;

    # é€Ÿç‡é™åˆ¶
    limit_req_zone $binary_remote_addr zone=api:10m rate=10r/m;

    location /api/ {
        limit_req zone=api burst=5 nodelay;
        proxy_pass http://localhost:3000;
    }

    location /admin {
        # ä»…å…è®¸ç‰¹å®šIPè®¿é—®ç®¡ç†ç•Œé¢
        allow 192.168.1.0/24;
        deny all;
        proxy_pass http://localhost:3000;
    }
}
```

---

## ğŸ“š æ‰©å±•æ–‡æ¡£

### ğŸ“– è¯¦ç»†æŒ‡å—

**åŠŸèƒ½é…ç½®**ï¼š

- [ğŸ“º TVBox å…¼å®¹é…ç½®æŒ‡å—](docs/TVBOX.md)
- [ğŸ’¾ Kvrocks é«˜æ€§èƒ½éƒ¨ç½²](docs/KVROCKS.md)
- [ğŸ—„ï¸ D1 æ•°æ®åº“è¿ç§»æŒ‡å—](D1_MIGRATION.md)

**æ•…éšœæ’é™¤**ï¼š

- [ğŸ”§ Docker æ•…éšœæ’é™¤æ‰‹å†Œ](DOCKER_TROUBLESHOOTING.md)
- [âš ï¸ å…¼å®¹æ€§é—®é¢˜è§£å†³](DEPLOYMENT_COMPATIBILITY.md)

### ğŸ¯ æœ€ä½³å®è·µ

**æ–°æ‰‹å¿«é€Ÿä¸Šæ‰‹è·¯å¾„**ï¼š

1. é€‰æ‹© Vercel + åŸºç¡€é…ç½®ï¼ˆæœ€ç®€å•ï¼‰
2. å‡çº§åˆ° Vercel + Upstashï¼ˆæ”¯æŒå¤šç”¨æˆ·ï¼‰
3. è¿›é˜¶åˆ° Docker è‡ªå»ºï¼ˆå®Œå…¨æ§åˆ¶ï¼‰
4. ç»ˆæé…ç½®ï¼šKvrocks é›†ç¾¤ï¼ˆé«˜å¯ç”¨ï¼‰

**ç”Ÿäº§ç¯å¢ƒæ¨èæ–¹æ¡ˆ**ï¼š

- **å°å‹ä¸ªäººç«™**ï¼šVercel + Upstash
- **ä¸­å‹å›¢é˜Ÿä½¿ç”¨**ï¼šDocker + Redis Cluster
- **å¤§å‹æœåŠ¡**ï¼šKubernetes + Kvrocks é›†ç¾¤
- **å…¨çƒæœåŠ¡**ï¼šCloudflare Pages + D1

### ğŸ”— ç›¸å…³èµ„æº

**å®˜æ–¹èµ„æº**ï¼š

- [ğŸ“¦ GitHub ä»“åº“](https://github.com/katelya77/KatelyaTV)
- [ğŸ³ Docker Hub](https://hub.docker.com/r/katelya77/katelyatv)
- [ğŸ“Š GitHub Container Registry](https://github.com/katelya77/KatelyaTV/pkgs/container/katelyatv)
- [ğŸ“‹ ç‰ˆæœ¬å‘å¸ƒé¡µ](https://github.com/katelya77/KatelyaTV/releases)

**ç¤¾åŒºæ”¯æŒ**ï¼š

- [ğŸ’¬ Discussions è®¨è®ºåŒº](https://github.com/katelya77/KatelyaTV/discussions)
- [ğŸ› Issues é—®é¢˜åé¦ˆ](https://github.com/katelya77/KatelyaTV/issues)
- [ğŸ“– Wiki çŸ¥è¯†åº“](https://github.com/katelya77/KatelyaTV/wiki)
- [ğŸ’¡ Feature Requests](https://github.com/katelya77/KatelyaTV/issues?q=label%3Aenhancement)

**åœ¨çº¿æ¼”ç¤º**ï¼š

- [ğŸ¬ å®˜æ–¹æ¼”ç¤ºç«™ç‚¹](https://katelyatv-demo.pages.dev/) (å¯†ç : `demo123`)
- [ğŸ“± PWA åŠŸèƒ½æ¼”ç¤º](https://katelyatv-pwa.vercel.app/)
- [ğŸ¨ ä¸»é¢˜é¢„è§ˆç«™ç‚¹](https://katelyatv-themes.pages.dev/)

### ğŸ¤ å‚ä¸è´¡çŒ®

**è´¡çŒ®æ–¹å¼**ï¼š

- â­ ç»™é¡¹ç›®ç‚¹ Star
- ğŸ› æŠ¥å‘Š Bug å’Œé—®é¢˜
- ğŸ’¡ æå‡ºæ–°åŠŸèƒ½å»ºè®®
- ğŸ“ å®Œå–„æ–‡æ¡£å’Œç¿»è¯‘
- ğŸ’» è´¡çŒ®ä»£ç å’Œä¿®å¤

**å¼€å‘è€…æŒ‡å—**ï¼š

```bash
# æœ¬åœ°å¼€å‘ç¯å¢ƒæ­å»º
git clone https://github.com/katelya77/KatelyaTV.git
cd KatelyaTV

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# è¿è¡Œæµ‹è¯•
pnpm test

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# ä»£ç æ ¼å¼åŒ–
pnpm lint --fix
pnpm format
```

---

## ğŸ”’ å®‰å…¨ä¸åˆè§„

### ğŸš¨ é‡è¦æé†’

**å¼ºçƒˆå»ºè®®**ï¼š

- âœ… **è®¾ç½®å¼ºå¯†ç **ï¼šé¿å…å…¬å¼€è®¿é—®ï¼Œä¿æŠ¤ä¸ªäººéšç§
- âœ… **ä¸ªäººä½¿ç”¨**ï¼šè¯·å‹¿å…¬å¼€åˆ†äº«å®ä¾‹é“¾æ¥æˆ–å•†ä¸šä½¿ç”¨
- âœ… **éµå®ˆæ³•å¾‹**ï¼šç¡®ä¿ä½¿ç”¨è¡Œä¸ºç¬¦åˆå½“åœ°æ³•å¾‹æ³•è§„
- âœ… **ç‰ˆæƒæ„è¯†**ï¼šå°Šé‡å†…å®¹ç‰ˆæƒï¼Œæ”¯æŒæ­£ç‰ˆ

**å®‰å…¨é…ç½®**ï¼š

- å¯ç”¨ HTTPS åŠ å¯†ä¼ è¾“
- è®¾ç½®è®¿é—®å¯†ç å’Œç”¨æˆ·è®¤è¯
- é…ç½® IP è®¿é—®é™åˆ¶
- å®šæœŸæ›´æ–°å’Œå®‰å…¨æ£€æŸ¥

### âš–ï¸ å…è´£å£°æ˜

- æœ¬é¡¹ç›®ä»…ä¾›ä¸ªäººå­¦ä¹ ã€ç ”ç©¶å’Œåˆæ³•ä½¿ç”¨
- ç”¨æˆ·éœ€å¯¹è‡ªå·±çš„ä½¿ç”¨è¡Œä¸ºæ‰¿æ‹…å®Œå…¨æ³•å¾‹è´£ä»»
- å¼€å‘è€…ä¸å¯¹ç”¨æˆ·çš„ä»»ä½•è¿æ³•è¡Œä¸ºæ‰¿æ‹…è´£ä»»
- è¯·ç¡®ä¿éµå®ˆæ‰€åœ¨åœ°åŒºçš„æ³•å¾‹æ³•è§„

---

## ğŸŒŸ è‡´è°¢ä¸æ”¯æŒ

### ğŸ™ ç‰¹åˆ«æ„Ÿè°¢

æ„Ÿè°¢ä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®å’ŒæŠ€æœ¯ç¤¾åŒºï¼š

**æ ¸å¿ƒä¾èµ–**ï¼š

- [Next.js](https://nextjs.org/) â€” å¼ºå¤§çš„ React å…¨æ ˆæ¡†æ¶
- [ArtPlayer](https://github.com/zhw2590582/ArtPlayer) â€” åŠŸèƒ½ä¸°å¯Œçš„ HTML5 è§†é¢‘æ’­æ”¾å™¨
- [Tailwind CSS](https://tailwindcss.com/) â€” å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- [TypeScript](https://www.typescriptlang.org/) â€” JavaScript çš„è¶…é›†

**åŸºç¡€è®¾æ–½**ï¼š

- [Cloudflare](https://cloudflare.com/) â€” å…¨çƒ CDN å’Œè¾¹ç¼˜è®¡ç®—
- [Vercel](https://vercel.com/) â€” ç°ä»£åŒ–çš„éƒ¨ç½²å¹³å°
- [Docker](https://docker.com/) â€” å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆ
- [Redis](https://redis.io/) â€” é«˜æ€§èƒ½å†…å­˜æ•°æ®åº“

**é¡¹ç›®å¯å‘**ï¼š

- [LibreTV](https://github.com/LibreSpark/LibreTV) â€” æä¾›è®¾è®¡ç†å¿µ
- [LunaTV](https://github.com/MoonTechLab/LunaTV) â€” é¡¹ç›®åŸºç¡€æ¶æ„

### ğŸ’ æ”¯æŒé¡¹ç›®å‘å±•

å¦‚æœ KatelyaTV å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼æ”¯æŒé¡¹ç›®ï¼š

**å…è´¹æ”¯æŒ**ï¼š

- â­ [GitHub ç‚¹ Star](https://github.com/katelya77/KatelyaTV/stargazers)
- ğŸ´ [Fork é¡¹ç›®](https://github.com/katelya77/KatelyaTV/fork)
- ğŸ’¬ [å‚ä¸è®¨è®º](https://github.com/katelya77/KatelyaTV/discussions)
- ğŸ“– [å®Œå–„æ–‡æ¡£](https://github.com/katelya77/KatelyaTV/tree/main/docs)
- ğŸ”— [æ¨èæœ‹å‹](https://github.com/katelya77/KatelyaTV)

**èµåŠ©æ”¯æŒ**ï¼š

<div align="center">
  <img src="public/wechat.jpg" alt="å¾®ä¿¡èµèµç " width="200">
  <br>
  <strong>è¯·å¼€å‘è€…å–æ¯å’–å•¡ â˜•</strong>
  <p><em>æ‚¨çš„æ”¯æŒæ˜¯é¡¹ç›®æŒç»­å‘å±•çš„åŠ¨åŠ›</em></p>
</div>

**ä¼ä¸šèµåŠ©**ï¼š
å¦‚æœæ‚¨çš„ä¼ä¸šå¸Œæœ›èµåŠ© KatelyaTV é¡¹ç›®ï¼Œè¯·é€šè¿‡ [GitHub Sponsors](https://github.com/sponsors/katelya77) æˆ–å‘é‚®ä»¶è”ç³»æˆ‘ä»¬ã€‚

### ï¿½ é¡¹ç›®ç»Ÿè®¡

[![GitHub stars](https://img.shields.io/github/stars/katelya77/KatelyaTV?style=social)](https://github.com/katelya77/KatelyaTV/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/katelya77/KatelyaTV?style=social)](https://github.com/katelya77/KatelyaTV/network/members)
[![GitHub watchers](https://img.shields.io/github/watchers/katelya77/KatelyaTV?style=social)](https://github.com/katelya77/KatelyaTV/watchers)

[![GitHub release](https://img.shields.io/github/v/release/katelya77/KatelyaTV)](https://github.com/katelya77/KatelyaTV/releases)
[![Docker Pulls](https://img.shields.io/docker/pulls/katelya77/katelyatv)](https://hub.docker.com/r/katelya77/katelyatv)
[![GitHub issues](https://img.shields.io/github/issues/katelya77/KatelyaTV)](https://github.com/katelya77/KatelyaTV/issues)
[![GitHub license](https://img.shields.io/github/license/katelya77/KatelyaTV)](https://github.com/katelya77/KatelyaTV/blob/main/LICENSE)

**Star History**ï¼š
[![Star History Chart](https://api.star-history.com/svg?repos=katelya77/KatelyaTV&type=Date)](https://star-history.com/#katelya77/KatelyaTV&Date)

---

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäº **MIT License** å¼€æºåè®®å‘å¸ƒã€‚

```
MIT License

Copyright (c) 2025 KatelyaTV & Contributors

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

<div align="center">
  <h2>ğŸ‰ æ„Ÿè°¢æ‚¨é€‰æ‹© KatelyaTVï¼</h2>
  <p>
    <strong>å¦‚æœé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ Star æ”¯æŒä¸€ä¸‹ï¼</strong>
  </p>
  <p>
    <a href="https://github.com/katelya77/KatelyaTV">ğŸ  é¡¹ç›®é¦–é¡µ</a>
    â€¢
    <a href="https://github.com/katelya77/KatelyaTV/issues">ğŸ› é—®é¢˜åé¦ˆ</a>
    â€¢
    <a href="https://github.com/katelya77/KatelyaTV/discussions">ğŸ’¬ è®¨è®ºäº¤æµ</a>
    â€¢
    <a href="https://github.com/katelya77/KatelyaTV/wiki">ğŸ“š ä½¿ç”¨æ–‡æ¡£</a>
  </p>
  <br>
  <p>
    <em>â¤ï¸ Made with love by KatelyaTV Community â¤ï¸</em>
  </p>
</div>
